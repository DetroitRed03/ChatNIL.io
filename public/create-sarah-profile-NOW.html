<!DOCTYPE html>
<html>
<head>
  <title>Create Sarah's Profile</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body {
      font-family: 'Monaco', 'Courier New', monospace;
      max-width: 1200px;
      margin: 50px auto;
      padding: 20px;
      background: #0a0a0a;
      color: #00ff00;
    }
    .container {
      background: #1a1a1a;
      padding: 30px;
      border-radius: 10px;
      border: 2px solid #00ff00;
    }
    h1 { color: #00ff00; text-align: center; margin-bottom: 30px; }
    button {
      background: #00ff00;
      color: #000;
      border: none;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      margin: 10px 0;
    }
    button:hover { background: #00cc00; }
    button:disabled { background: #666; cursor: not-allowed; }
    #output {
      background: #000;
      color: #00ff00;
      padding: 20px;
      border-radius: 5px;
      margin-top: 20px;
      white-space: pre-wrap;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 14px;
      border: 1px solid #00ff00;
      max-height: 600px;
      overflow-y: auto;
    }
    .success { color: #00ff00; }
    .error { color: #ff0000; }
    .info { color: #00aaff; }
    .warning { color: #ffaa00; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üèÄ Create Sarah Johnson's Profile</h1>

    <button onclick="checkExisting()">1Ô∏è‚É£ Check Existing Profile</button>
    <button onclick="createProfile()">2Ô∏è‚É£ Create/Update Profile with ALL Stats</button>
    <button onclick="verifyProfile()">3Ô∏è‚É£ Verify Profile Data</button>

    <div id="output">Ready to create Sarah's profile...</div>
  </div>

  <script>
    const SUPABASE_URL = 'https://lqskiijspudfocddhkqs.supabase.co';
    const SUPABASE_SERVICE_ROLE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxxc2tpaWpzcHVkZm9jZGRoa3FzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTU5MzM1NCwiZXhwIjoyMDc3MTY5MzU0fQ.LpapT51choXCwTfpbE81AIc4JC9QOO0FpOtqUxZ405I';

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);
    const userId = 'ca05429a-0f32-4280-8b71-99dc5baee0dc';

    function log(message, type = 'info') {
      const output = document.getElementById('output');
      const className = type;
      output.innerHTML += `<span class="${className}">${message}</span>\n`;
      output.scrollTop = output.scrollHeight;
    }

    function clearOutput() {
      document.getElementById('output').innerHTML = '';
    }

    async function checkExisting() {
      clearOutput();
      log('üîç Checking for existing profile...', 'info');

      const sql = `
        SELECT
          user_id,
          display_name,
          sport,
          school,
          instagram_handle,
          tiktok_handle,
          twitter_handle,
          total_followers,
          estimated_fmv
        FROM athlete_public_profiles
        WHERE user_id = '${userId}';
      `;

      const { data, error } = await supabase.rpc('exec_sql', { query: sql });

      if (error) {
        log(`‚ùå Error: ${error.message}`, 'error');
      } else {
        log('‚úÖ Query executed', 'success');
        log(JSON.stringify(data, null, 2), 'info');
      }
    }

    async function createProfile() {
      clearOutput();
      log('üèÄ Creating Sarah Johnson\'s profile with ALL stats...', 'info');

      const sql = `
        INSERT INTO athlete_public_profiles (
          user_id,
          display_name,
          sport,
          school,
          graduation_year,
          bio,
          is_available_for_partnerships,
          instagram_handle,
          instagram_followers,
          instagram_engagement_rate,
          tiktok_handle,
          tiktok_followers,
          tiktok_engagement_rate,
          twitter_handle,
          twitter_followers,
          total_followers,
          avg_engagement_rate,
          content_categories,
          achievements,
          estimated_fmv,
          profile_completion_score,
          profile_completion_tier,
          created_at,
          updated_at
        ) VALUES (
          '${userId}',
          'Sarah Johnson',
          'Basketball',
          'UCLA',
          2026,
          'Point guard with exceptional court vision and defensive skills. Two-time All-Pac-12 selection.',
          true,
          '@sarahjbasketball',
          45000,
          4.8,
          '@sarahjhoops',
          82000,
          6.2,
          '@SJohnson_UCLA',
          15000,
          142000,
          5.5,
          '["Sports", "Fitness", "Lifestyle", "Fashion"]'::jsonb,
          '["All-Pac-12 First Team (2023, 2024)", "Team Captain", "Academic All-American", "1,200+ career points"]'::text[],
          75000,
          85,
          'platinum',
          now(),
          now()
        )
        ON CONFLICT (user_id) DO UPDATE SET
          display_name = EXCLUDED.display_name,
          sport = EXCLUDED.sport,
          school = EXCLUDED.school,
          graduation_year = EXCLUDED.graduation_year,
          bio = EXCLUDED.bio,
          is_available_for_partnerships = EXCLUDED.is_available_for_partnerships,
          instagram_handle = EXCLUDED.instagram_handle,
          instagram_followers = EXCLUDED.instagram_followers,
          instagram_engagement_rate = EXCLUDED.instagram_engagement_rate,
          tiktok_handle = EXCLUDED.tiktok_handle,
          tiktok_followers = EXCLUDED.tiktok_followers,
          tiktok_engagement_rate = EXCLUDED.tiktok_engagement_rate,
          twitter_handle = EXCLUDED.twitter_handle,
          twitter_followers = EXCLUDED.twitter_followers,
          total_followers = EXCLUDED.total_followers,
          avg_engagement_rate = EXCLUDED.avg_engagement_rate,
          content_categories = EXCLUDED.content_categories,
          achievements = EXCLUDED.achievements,
          estimated_fmv = EXCLUDED.estimated_fmv,
          profile_completion_score = EXCLUDED.profile_completion_score,
          profile_completion_tier = EXCLUDED.profile_completion_tier,
          updated_at = now();
      `;

      const { data, error } = await supabase.rpc('exec_sql', { query: sql });

      if (error) {
        log(`‚ùå ERROR: ${error.message}`, 'error');
      } else {
        log('‚úÖ Profile created/updated successfully!', 'success');
        log('', 'info');
        log('üìä Profile Details:', 'success');
        log('  ‚Ä¢ Name: Sarah Johnson', 'info');
        log('  ‚Ä¢ Sport: Basketball', 'info');
        log('  ‚Ä¢ School: UCLA', 'info');
        log('  ‚Ä¢ Graduation: 2026', 'info');
        log('', 'info');
        log('üì± Social Media:', 'success');
        log('  ‚Ä¢ Instagram: @sarahjbasketball (45,000 followers, 4.8% engagement)', 'info');
        log('  ‚Ä¢ TikTok: @sarahjhoops (82,000 followers, 6.2% engagement)', 'info');
        log('  ‚Ä¢ Twitter: @SJohnson_UCLA (15,000 followers)', 'info');
        log('  ‚Ä¢ Total: 142,000 followers', 'info');
        log('', 'info');
        log('üí∞ Valuation:', 'success');
        log('  ‚Ä¢ Estimated FMV: $75,000', 'info');
        log('  ‚Ä¢ Profile Score: 85/100 (Platinum tier)', 'info');
        log('', 'info');
        log('üîê Login Credentials:', 'warning');
        log('  ‚Ä¢ Email: sarah.johnson@test.com', 'warning');
        log('  ‚Ä¢ Password: TestPassword123!', 'warning');
      }
    }

    async function verifyProfile() {
      clearOutput();
      log('üîç Verifying Sarah\'s profile data...', 'info');

      const sql = `
        SELECT * FROM athlete_public_profiles
        WHERE user_id = '${userId}';
      `;

      const { data, error } = await supabase.rpc('exec_sql', { query: sql });

      if (error) {
        log(`‚ùå Error: ${error.message}`, 'error');
      } else {
        log('‚úÖ Profile verified!', 'success');
        log('', 'info');
        log('üìä Complete Profile Data:', 'info');
        log(JSON.stringify(data, null, 2), 'info');
      }
    }
  </script>
</body>
</html>
